{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/Demo.css') }}">
<!-- 插入到页面标题上方 -->
{% for message in get_flashed_messages() %}
	<div class="alert">{{ message }}</div>
{% endfor %}
{% endblock %}

{% block content %}

<ul class="movie-list">
    <p>{{ movies|length }} Titles</p>
        {% if current_user.is_authenticated %}
        <form method="post">
            Name <input type="text" name="title" autocomplete="off" required>
            Year <input type="text" name="year" autocomplete="off" required>
            <input class="btn" type="submit" name="submit" value="Add">
        </form>
    {% endif %}

    {% for movie in movies %}
    <li>
    {% if current_user.is_authenticated %}
        <span class="float-right">
            <a class="btn" href="{{ url_for('edit', movie_id=movie.id) }}">Edit</a>
            ...
        </span>
    {% endif %}
        {{ movie.title }} - {{ movie.year }}
    {% if current_user.is_authenticated %}
        <span class="float-right">
            <form class="inline-form" method="post" action="{{ url_for('delete', movie_id=movie.id) }}">
                <input class="btn" type="submit" name="delete" value="Delete" onclick="return confirm('Are you sure?')">
            </form>
        </span>
    {% endif %}
    </li>
    {% endfor %}
</ul>
{% endblock %}